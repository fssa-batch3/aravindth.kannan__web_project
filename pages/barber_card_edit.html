<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../Assets/CSS/universe.css" />
    <link rel="stylesheet" href="../Assets/CSS/barber_card_form.css" />
    <title>barber booking list</title>
  </head>
  <body>
    <!-- header is started -->
    <!-- <header>
      <div class="header">
        <div>
          <a href="../pages/barber_home.html">
            <img
              class="logo_img"
              src="../Assets/Images/sharp logo black.png"
              alt="logo"
            />
          </a>
        </div>
        <div>
          <nav class="All-navs">
            <div class="nav_dropdown">
              <button class="nav_dropbtn">Hair styles</button>
              <div class="nav_dropdown-content">
                <a href="../pages/barber_short_style.html">Short</a>
                <a href="../pages/barber_medium_style.html">Medium</a>
                <a href="../pages/barber_long_style.html">Long</a>
                <a href="../pages/barber_fade_style.html">Fade</a>
                <a href="../pages/barber_undercut_style.html">Undercut</a>
                <a href="../pages/barber_beard_style.html">Beard</a>
              </div>
            </div>
            <a class="nav" href="../pages/barber_card.html">Barber card</a>
            <a class="nav" href="../pages/barber_shop_card.html">Shop card</a>
            <a class="nav" href="../pages/barber_booking_list.html"
              >booking list</a
            >

            <a class="nav" href="../pages/barber_about_us.html">About Us</a>
            <a class="nav" href="../pages/barber_contact_us.html">Contact Us</a>
            <a class="nav" href="../pages/barber_profile.html"
              ><img
                src="../Assets/Images/profile-2.png"
                alt="profile"
                height="30px"
                width="30px"
            /></a>
          </nav>
        </div>
      </div>
    </header> -->
    <!-- header is ended -->

    <!-- section is started -->
    <div class="head">
      <p class="head_text">Create Your Barber Card</p>
    </div>
    <form class="card_form" id="create_b_card">
      <div class="name">
        <label>Name</label>

        <div class="name-box">
          <input
            id="b_name"
            class="name-box-1"
            type="text"
            autocomplete="name"
          />
        </div>
      </div>
      <div class="name">
        <label>Email</label>

        <div class="name-box">
          <input
            id="barber_card_email"
            class="name-box-1"
            type="email"
            autocomplete="name"
            disabled
          />
        </div>
      </div>
      <div class="name">
        <label>Profile-URL</label>
        <div class="name-box">
          <input class="name-box-1" type="url" id="photo" />
        </div>
      </div>

      <!-- <div class="email">
        <label>Slogan</label>
        <div class="address-box">
          <input class="name-box-1" type="text" id="slogan" />
        </div>
      </div> -->

      <!-- <div class="experience">
        <label>Experience</label>
        <div class="address-box">
          <input class="name-box-1" type="text" id="experience" />
        </div>
      </div> -->

      <div class="sample-haircut">
        <input
          class="name-box-1"
          type="url"
          id="sample"
          placeholder="sample haircut -1"
        />
      </div>
      <div class="sample-haircut">
        <input
          class="name-box-1"
          type="url"
          id="sample_1"
          placeholder="sample haircut -2"
        />
      </div>
      <div class="sample-haircut">
        <input
          class="name-box-1"
          type="url"
          id="sample_2"
          placeholder="sample haircut -3"
        />
      </div>

      <div class="submit">
        <button class="submit-1">Save</button>
      </div>
    </form>

    <!-- section is ended -->

    <!-- footer is started -->
    <!-- <footer>
      <div class="footer">
        <div class="footer_firsthalf">
          <div>
            <h3>About us</h3>
            <p>
              Lorem ipsum dolor sit amet, consectetur adipisicing elit. Nemo
              optio sequi minima, reprehenderit excepturi quos beatae deserunt
              praesentium officiis ipsa vitae nostrum maxime ratione
              exercitationem ea culpa odio expedita tempora. Lorem ipsum dolor
              sit amet, consectetur adipisicing elit. Nemo optio sequi minima,
              reprehenderit excepturi quos beatae deserunt praesentium officiis
              ipsa vitae nostrum maxime ratione exercitationem ea culpa odio
              expedita tempora.
            </p>
          </div>

          <br />
          <div class="footicons">
            <a href="#"
              ><img
                class="footround"
                src="../Assets/Images/whatsapp.png"
                alt="What's app"
            /></a>
            <a href="#">
              <img
                class="footround"
                src="../Assets/Images/facebook-2.png"
                alt="face book"
            /></a>
            <a href="#">
              <img
                class="footround"
                src="../Assets/Images/instagram-2.png"
                alt="instagram"
            /></a>
            <a href="#"
              ><img
                class="footround"
                src="../Assets/Images/twitter-2.png"
                alt="twitter"
            /></a>
          </div>
        </div>

        <div class="footer_secondhalf">
          <div class="footcard">
            <img src="../Assets/Images/about us.jpg" alt="Haircut" />
            <div class="footinfo">
              <div>
                <h3>Address</h3>
                <p>
                  Lorem, ipsum dolor sit amet <br />
                  consectetur adipisicing <br />
                  elit. Nam nulla dolorem <br />
                  fugiat <br />
                </p>
              </div>
              <div>
                <h3>Contact us</h3>
                <p>9764652785</p>
              </div>
              <div>
                <h3>email</h3>
                <p>sharp&clean@gmail.com</p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </footer> -->
    <!-- footer is ended -->

    <!-- java script -->

    <script>
      const thisBarber = JSON.parse(localStorage.getItem("single_barber"));
      const barberProfile = JSON.parse(localStorage.getItem("barber_profile"));
      // get object from local storage by email

      let oneBarber = barberProfile.find(function (event) {
        let oneBarberEmail = event["barber_email"];
        if (thisBarber == oneBarberEmail) {
          return true;
        }
      });

      // card java script (or) function
      const barberCardInfo = JSON.parse(localStorage.getItem("barber_card"));
      // store a email for verify!
      let barber_email = oneBarber["barber_email"];
      let barber_card = barberCardInfo.find(function (event) {
        let one_barber_card = event["barber_card_email"];
        if (barber_email == one_barber_card) {
          return true;
        }
      });

      //  set the value of that card for barber profile
      const cardbarberProfile = (document.getElementById("photo").value =
        barber_card["barber_photo"]);
      const cardbarberName = (document.getElementById("b_name").value =
        barber_card["barbername"]);
      const cardbarberEmail = (document.getElementById(
        "barber_card_email"
      ).value = barber_card["barber_card_email"]);
     
      const cardbarberSample_1 = (document.getElementById("sample").value =
        barber_card["barber_sample"]);
      const cardbarberSample_2 = (document.getElementById("sample_1").value =
        barber_card["barber_sample_1"]);
      const cardbarberSample_3 = (document.getElementById("sample_2").value =
        barber_card["barber_sample_2"]);

      //  get data from this form
      let checker = false;

      const barberCard = document.getElementById("create_b_card");

      barberCard.addEventListener("submit", function (event) {
        event.preventDefault();
        // create empty array
        let newArray = [];

        if (localStorage.getItem("barber_card") != null) {
          newArray = JSON.parse(localStorage.getItem("barber_card"));
        }

        let barbername = document.getElementById("b_name").value;
        let barber_card_email =
          document.getElementById("barber_card_email").value;
        let barber_photo = document.getElementById("photo").value;
        
        let barber_sample = document.getElementById("sample").value;
        let barber_sample_1 = document.getElementById("sample_1").value;
        let barber_sample_2 = document.getElementById("sample_2").value;
// create object for edit data
        let one_barber_card = {
          barbername,
          barber_card_email,
          barber_photo,
          // barber_slogan,
          // barber_experience,
          barber_sample,
          barber_sample_1,
          barber_sample_2,
        };
//  assign data in the correct object!
        let newData = JSON.parse(localStorage.getItem("barber_card"));

        let oldData = newData.find(i => i.barber_card_email == barber_card_email);
        if (oldData == undefined) {
          alert("Email id not match");
        } else {
          let updated = Object.assign(oldData, one_barber_card);
          let index = newData.indexOf(oldData.barberCardEmail);
          newData[index] = updated;
          localStorage.setItem("barber_card", JSON.stringify(newData));
          window.location.href = "./barber_profile.html";
        }
      });
    </script>
  </body>
</html>
