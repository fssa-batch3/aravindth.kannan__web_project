<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../Assets/CSS/universe.css" />
    <link rel="stylesheet" href="../Assets/CSS/barber_card_form.css" />
    <title>Apply barber</title>
  </head>
  <body>

    <!-- section is started -->
    <div class="head">
      <p class="head_text">register for barber</p>
    </div>
    <form class="card_form" id="barber_profile_form">
      <div class="name">
        <label>Name</label>
        <div class="name-box">
          <input
          value="aravindth"
          required
          pattern="[A-Za-z0-9]+"
          title="Make sure that name should not contain space"
            id="b_name"
            class="name-box-1"
            type="text"
            autocomplete="name"
          />
        </div>
      </div>
      
      <div class="name">
        <label>Profile-URL</label>
        <div class="name-box">
          <input 
          required
          class="name-box-1" type="url" id="photo" />
        </div>
      </div>
      <div class="email">
        <label>Slogan</label>
        <div class="address-box">
          <input 
          required
          value="Always a Cut above the Rest."
          class="name-box-1" type="text" id="slogan" />
        </div>
      </div>
      <div class="email">
        <label>Phone</label>
        <div class="address-box">
          <input 
          value="9887768798"
          pattern="[7-9]{1}[0-9]{9}" 
       title="Phone number with 7-9 and remaing 9 digit with 0-9"
          required
          class="name-box-1" type="number" id="barber_phone" />
        </div>
      </div>
      <div class="experience">
        <label>Experience</label>
        <div class="address-box">
          <input 
          required
          value="12-years"
          class="name-box-1" type="text" id="experience" />
        </div>
      </div>  
          <div class="all_inputs">
            <label class="all_label">Address</label>
            <br />
            <br />
            <input 
            required
           value="3/15, East street, A.kumara puram, thoothukudi, Tamil nadu -08."
            id="address" class="name-box-1" />
          </div>

          <div class="all_inputs">
            <label class="all_label">About</label>
            <br />
            <br />
            <input 
            required
            value="I have many years experience and I have lot of haircut styles. I give best discount for beard triming"
            id="about" class="name-box-1"/>
          </div>
      <div class="submit">
        <button class="submit-1">Submit</button>
      </div>
    </form>

    <!-- section is ended -->


    <!-- java script -->

    <script>
      // get data from this form
      const thisBarber = JSON.parse(localStorage.getItem("single_barber"));
      let checker = false;

      const barberCard = document.getElementById("barber_profile_form");

      barberCard.addEventListener("submit", function (event) {
        event.preventDefault();
        // create empty array
        let newArray = [];

        if (localStorage.getItem("barber_profile") != null) {
          newArray = JSON.parse(localStorage.getItem("barber_profile"));
        }

        const barberName = document.getElementById("b_name").value;
       
        const barberPhoto = document.getElementById("photo").value;
        const barberSlogan = document.getElementById("slogan").value;
        const barberPhone = document.getElementById("barber_phone").value;
        const barberAddress = document.getElementById("address").value;
        const barberAbout = document.getElementById("about").value;
        const barberExperience = document.getElementById("experience").value;
        const barberId = Date.now();

        let one_barber_card = {
          barberid: barberId,
          barbername: barberName,
          barber_email: thisBarber,
          barber_photo: barberPhoto,
          barber_slogan: barberSlogan,
          barber_phone:barberPhone,
          barber_address:barberAddress,
          barber_about: barberAbout,
          barber_experience: barberExperience,
          
        };

          newArray.push(one_barber_card);
          const pushArray = JSON.stringify(newArray);
          localStorage.setItem("barber_profile", pushArray);
          alert("Successfully barber profile created");
          window.location.href = "./barber_profile.html";
        
      });
    </script>
  </body>
</html>
